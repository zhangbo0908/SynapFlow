# SynapFlow UI 设计规范 (Design Specification)

本规范旨在复刻 XMind 的视觉美学，并在此基础上优化 SynapFlow 的交互体验。核心设计哲学：**秩序、流动、克制**。

### 3.3 底部标签栏 (Sheet Bar)
- **位置**：应用窗口最底部，高度 `32px`。
- **背景**：`ui-bg-panel`。
- **组成元素**：
  - **标签页 (Tab)**：
    - 选中态：背景 `ui-bg-app`，上边框高亮 `ui-accent-primary`，文字 `ui-text-primary`。
    - 默认态：背景透明，文字 `ui-text-secondary`。
    - 交互：支持拖拽排序，双击重命名。
  - **添加按钮 (+)**：位于最后一个标签页右侧，点击创建新画布。
  - **画布信息**：右侧显示当前画布缩放比例及节点统计。

### 3.4 工具栏 (Toolbar)
- **位置**：应用窗口顶部，高度 `40px`。
- **布局**：
  - **左侧**：Logo + 应用名称 + 保存状态。
  - **右侧**：功能操作区（侧边栏切换、主题切换、文件操作、导出）。
- **交互规范**：
  - **侧边栏切换 (Sidebar Toggle)**：
    - **位置**：工具栏最右侧或主题切换按钮左侧。
    - **样式**：图标按钮，激活状态（展开）显示高亮色 `ui-brand`，未激活状态（折叠）显示灰色。
    - **交互**：点击切换右侧属性面板的展开/折叠状态。
  - **导出菜单 (Export Menu)**：
    - **触发器**：使用单一的 "Share/Export" 图标按钮（如：分享箭头图标），点击后展开下拉菜单。
    - **菜单样式**：
      - 悬浮面板，圆角 `8px`，阴影 `0 4px 12px rgba(0,0,0,0.15)`。
      - 背景色 `ui-bg-panel`，边框 `ui-border-base`。
    - **菜单项**：
      - 包含图标和文字说明（例如：Markdown, PNG, JPEG, PDF）。
      - **Hover**：背景色变更为 `ui-bg-hover`。
      - **点击**：执行导出操作并自动关闭菜单。
    - **避免**：不要将多个导出格式直接平铺在工具栏上，保持界面整洁。

---

## 1. 设计令牌 (Design Tokens)

### 1.1 色彩系统 (Color Palette)
引入**语义化色彩令牌**以支持光/暗色模式切换。

#### 1.1.1 应用界面 (App UI)
| 令牌名称 | 浅色模式 (Light) | 深色模式 (Dark) | 用途 |
| :--- | :--- | :--- | :--- |
| `ui-bg-app` | `#FFFFFF` | `#1E1E1E` | 应用整体背景/侧边栏 |
| `ui-bg-panel` | `#F5F7FA` | `#252526` | 属性面板/工具栏背景 |
| `ui-border-base` | `#E5E7EB` | `#3E3E42` | UI 分割线/边框 |
| `ui-text-primary` | `#1A1A1A` | `#E0E0E0` | 主要 UI 文本 |
| `ui-text-secondary` | `#6B7280` | `#858585` | 次要 UI 文本 |
| `ui-accent-primary` | `#3498DB` | `#4CC2FF` | 强调色/主按钮 |

#### 1.1.2 导图内容 (Map Content)
参考 XMind 的“彩虹分支”色系，定义以下核心色彩（具体值随主题 Theme 变化，此处为默认值）：

| 令牌名称 | 默认值 (HEX) | 用途 |
| :--- | :--- | :--- |
| `color-branch-1` | `#FF5D5D` | 分支 1 (红) |
| `color-branch-2` | `#FF9F43` | 分支 2 (橙) |
| `color-branch-3` | `#2ECC71` | 分支 3 (绿) |
| `color-branch-4` | `#3498DB` | 分支 4 (蓝) |
| `color-focus-ring` | `#5D9CEC` | 选中/聚焦状态边框 |

### 1.2 字体排印 (Typography)
- **字体族**：优先使用系统无衬线字体 (`Inter`, `-apple-system`, `PingFang SC`)。
- **层级定义**：
  - **中心主题**：24px, ExtraBold, 1.4 Line Height.
  - **分支主题**：18px, Bold, 1.4 Line Height.
  - **子主题**：14px, Regular, 1.4 Line Height.

---

## 2. 布局逻辑 (Layout Logic)

### 2.1 节点间距 (Spacing)
为了保持 XMind 的视觉呼吸感，采用以下固定间距参数：
- **水平间距 (Horizontal Gap)**：
  - 中心主题 → 分支主题：`64px`
  - 分支主题 → 子主题：`40px`
  - 子主题 → 孙主题：`32px`
- **垂直间距 (Vertical Gap)**：
  - 同级节点之间：`16px` (基于内容高度动态调整)

### 2.2 连线样式 (Connector Style)
- **形态**：采用 **三阶贝塞尔曲线 (Cubic Bézier Curve)**。
- **起点/终点**：
  - 起点：父节点中心右侧边缘。
  - 终点：子节点中心左侧边缘。
- **粗细与颜色**：
  - 靠近中心主题的连线较粗 (`3px`)，随着层级递减逐渐变细 (`1.5px`)。
  - 连线颜色应继承分支主题的色值，并降低 20% 的饱和度。

---

## 3. 组件架构 (Component Architecture)

### 3.1 节点 (Node Component)
- **容器属性**：
  - **内边距 (Padding)**：`12px 20px`。
  - **圆角 (Border Radius)**：`8px` (中心/分支主题)，`4px` (子主题)。
  - **阴影**：微弱的投影 `0 2px 4px rgba(0,0,0,0.05)`。
- **状态表现**：
  - **Hover**：边框颜色变为 `color-border-focus` (透明度 30%)。
  - **Active/Selected**：边框加粗为 `2px`，颜色为 `color-border-focus`。

### 3.2 属性面板 (Property Panel)
- **位置**：固定在屏幕右侧，宽度 `280px` (支持折叠)。
- **交互**：
  - **折叠/展开**：通过工具栏按钮触发。折叠时宽度平滑过渡至 `0px`，中心画布区域自动扩展填充。
  - 采用 **卡片式分组** (如“形状”、“文本”、“结构”)。
  - 控件使用紧凑型 UI，图标采用 16px 线性图标。

---

## 4. 交互微动效 (Micro-interactions)
1. **节点伸缩**：点击折叠/展开按钮时，子节点采用 `scale` 和 `opacity` 的组合过渡动画 (Duration: 200ms, Easing: ease-out)。
2. **自动对齐**：当拖拽节点位置时，受影响的同级节点应平滑移动到新位置，而非瞬间跳转。

---

## 5. 辅助功能与无障碍 (Accessibility)
- **对比度**：确保所有分支颜色在白色背景上的对比度符合 WCAG AA 标准。
- **键盘导航**：
  - `Arrow Keys`：在节点间切换焦点。
  - `Enter`：创建同级节点并直接进入编辑模式。
  - `Tab`：创建子节点。

---

## 6. 主题与模板系统 (Themes & Templates)

基于 XMind 的美学标准，针对不同场景设计的核心主题预设。为适配 SynapFlow 的光/暗色皮肤切换，每个主题均定义了对应的 **Light Mode** 和 **Dark Mode** 配色方案。

### 6.1 商务专业 (Professional Business)
**设计逻辑**：强调**权威、冷静、高效**。采用低饱和度的冷色调，配合硬朗的线条，适合正式汇报与项目管理。

| 元素 (Element) | 浅色模式 (Light Mode) | 深色模式 (Dark Mode) |
| :--- | :--- | :--- |
| **画布背景** | `#F5F7FA` (浅灰蓝) | `#1E1E1E` (深灰) |
| **中心主题** | 背景 `#2C3E50`, 文字 `#FFFFFF` | 背景 `#4B6584`, 文字 `#FFFFFF` |
| **分支主题** | 文字 `#34495E` | 文字 `#A4B0BE` |
| **连线色系** | `#2980B9`, `#16A085`, `#8E44AD`, `#2C3E50` | `#5D9CEC`, `#48C774`, `#AC92EC`, `#AAB7B8` |

- **形状模板**：
  - **中心**：矩形 (Rectangle)，无圆角或微圆角 (`2px`)
  - **分支**：矩形或下划线
  - **连线**：直线或折线 (Orthogonal)，体现严谨逻辑

### 6.2 清新薄荷 (Fresh Mint)
**设计逻辑**：强调**轻松、现代、透气**。高明度、低饱和度的马卡龙色系，适合旅行计划、读书笔记或头脑风暴。

| 元素 (Element) | 浅色模式 (Light Mode) | 深色模式 (Dark Mode) |
| :--- | :--- | :--- |
| **画布背景** | `#FFFFFF` (纯白) | `#263238` (深蓝绿灰) |
| **中心主题** | 背景 `#4ECDC4`, 文字 `#FFFFFF` | 背景 `#00BFA5`, 文字 `#FFFFFF` |
| **分支主题** | 文字 `#2D3436` | 文字 `#E0F2F1` |
| **连线色系** | `#FF6B6B`, `#FFE66D`, `#1A535C`, `#F78FB3` | `#FF8A80`, `#FFFF8D`, `#80CBC4`, `#F48FB1` |

- **形状模板**：
  - **中心**：胶囊形 (Capsule) / 椭圆
  - **分支**：圆角矩形 (`16px` Radius)
  - **连线**：平滑曲线 (Bezier)，体现思维流动

### 6.3 极简黑白 (Minimalist Mono)
**设计逻辑**：强调**内容至上、无干扰**。仅使用灰度，适合打印输出或专注于逻辑结构的梳理。

| 元素 (Element) | 浅色模式 (Light Mode) | 深色模式 (Dark Mode) |
| :--- | :--- | :--- |
| **画布背景** | `#FFFFFF` (纯白) | `#000000` (纯黑) |
| **中心主题** | 背景 `#000000`, 文字 `#FFFFFF` | 背景 `#FFFFFF`, 文字 `#000000` |
| **分支主题** | 文字 `#000000` | 文字 `#FFFFFF` |
| **连线色系** | `#000000` (全黑) | `#FFFFFF` (全白) |

- **形状模板**：
  - **中心**：圆角矩形 (`8px`)
  - **分支**：仅下划线 (Underline)
  - **连线**：细直线 (`1px`)

### 6.4 活力橙光 (Vibrant Energy)
**设计逻辑**：强调**热情、醒目、创造力**。暖色调为主，高对比度，适合市场营销方案或创意写作。

| 元素 (Element) | 浅色模式 (Light Mode) | 深色模式 (Dark Mode) |
| :--- | :--- | :--- |
| **画布背景** | `#FFF5F0` (暖白) | `#2D241E` (深暖褐) |
| **中心主题** | 背景 `#FF9F43`, 文字 `#FFFFFF` | 背景 `#E67E22`, 文字 `#FFFFFF` |
| **分支主题** | 文字 `#2D3436` | 文字 `#FFEAA7` |
| **连线色系** | `#EE5253`, `#FECA57`, `#FF9FF3`, `#54A0FF` | `#FF7675`, `#FDCB6E`, `#E056FD`, `#74B9FF` |

- **形状模板**：
  - **中心**：云朵形或不规则圆形
  - **分支**：圆角矩形
  - **连线**：粗曲线，富有张力

### 6.5 赛博科技 (Cyber Tech)
**设计逻辑**：强调**沉浸、科技感**。原“暗夜霓虹”升级版，深色模式下为高饱和荧光色，浅色模式下为清透的科技蓝风格。

| 元素 (Element) | 浅色模式 (Light Mode) | 深色模式 (Dark Mode) |
| :--- | :--- | :--- |
| **画布背景** | `#F0F4F8` (极浅灰蓝) | `#1E1E1E` (深灰黑) |
| **中心主题** | 边框 `#3498DB`, 背景 `#FFFFFF`, 文字 `#2980B9` | 边框霓虹光晕, 背景透明, 文字 `#FFFFFF` |
| **分支主题** | 文字 `#2C3E50` | 文字 `#FFFFFF` |
| **连线色系** | `#3498DB`, `#9B59B6`, `#2ECC71`, `#E74C3C` | `#00FF9D`, `#FF0055`, `#00D2FF`, `#F0F` (荧光) |

- **形状模板**：
  - **中心**：六边形 (Hexagon) 或 菱形
  - **分支**：镂空圆角矩形 (Outline only)
  - **连线**：直线，深色模式下带发光效果 (Glow)
